import{j as e,a as o,b as h,u as j,r as b}from"./index-D7RVNCsT.js";import{f as p,b as i,a as y,B as N}from"./Formtater-B22nCtMi.js";import{c as u}from"./useFetch-DlV1VNY5.js";import"./apiConfig-ClF-BgST.js";const m=({account:a})=>{const r=t=>t===void 0?0:typeof t=="string"?parseFloat(t):t,c=a.name||a.bank_name||"Cuenta sin nombre";return e.jsx("div",{className:"w-full p-4 border-2 border-solid border-primary rounded-lg",children:e.jsxs("div",{className:"w-full flex flex-col items-start",children:[e.jsx("h1",{className:"font-medium",children:c}),e.jsx("h1",{className:"text-sm text-gray-500 font-medium",children:p(a.type)}),a.type==="debit"?e.jsxs("div",{className:"w-full flex flex-col mt-8 space-y-4",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("h1",{className:"text-sm text-gray-500",children:"Saldo inicial"}),e.jsx("h1",{className:"text-base font-semibold",children:i(r(a.initial_balance))})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("h1",{className:"text-sm text-gray-500",children:"Ingresos"}),e.jsx("h1",{className:"text-sm",children:i(r(a.incomes))})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("h1",{className:"text-sm text-gray-500",children:"Egresos"}),e.jsx("h1",{className:"text-sm",children:i(r(a.expenses))})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("h1",{className:"text-sm text-gray-500",children:"Saldo final"}),e.jsx("h1",{className:"text-base font-semibold",children:i(r(a.final_balance))})]})]}):e.jsxs("div",{className:"w-full flex flex-col mt-8 space-y-4",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("h1",{className:"text-sm text-gray-500",children:"Gastado"}),e.jsx("h1",{className:"text-sm",children:i(r(a.expenses))})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("h1",{className:"text-sm text-gray-500",children:"Pagado"}),e.jsx("h1",{className:"text-sm",children:i(r(a.incomes))})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("h1",{className:"text-sm text-gray-500",children:"Balance"}),e.jsx("h1",{className:"text-base font-semibold",children:i(r(a.balance))})]})]})]})})},k=()=>{const{token:a}=o(),r=h(),c=j(),{month:t,year:n}=r.state||{month:null,year:null},{data:s,isLoading:d,error:f,refetch:x}=u(a??"",(t==null?void 0:t.toString())??"0",n??"0");return b.useEffect(()=>{n&&t&&x()},[n,t,x]),d?e.jsx("div",{children:"Loading..."}):f?e.jsx("div",{children:"Error loading data"}):e.jsxs("div",{className:"w-full min-h-screen pt-8 pb-16 px-5 md:px-72 flex flex-col justify-start items-center space-y-8",children:[e.jsx("h1",{className:"text-xl font-bold",children:"WalletSheet"}),e.jsx("h1",{className:"text-base font-medium text-center",children:`${y(t??0)} ${n}`}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row space-y-8 md:space-y-0 space-x-0 md:space-x-8 pb-20",children:[e.jsxs("div",{className:"w-full md:w-1/2 flex flex-col space-y-8",children:[e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("h1",{children:["Cuentas de débito (",s==null?void 0:s.balances.filter(l=>l.type==="debit").length,")"]}),s==null?void 0:s.balances.filter(l=>l.type==="debit").map(l=>e.jsx(m,{account:{...l,name:l.bank_name}},l.id))]}),e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("h1",{children:["Cuentas de crédito (",s==null?void 0:s.balances.filter(l=>l.type==="credit").length,")"]}),s==null?void 0:s.balances.filter(l=>l.type==="credit").map(l=>e.jsx(m,{account:{...l,name:l.bank_name}},l.id))]})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsxs("h1",{children:["Transacciones (",s==null?void 0:s.transactions.length,")"]}),s==null?void 0:s.transactions.map(l=>e.jsx("div",{className:"w-full border-b-2 border-gray-100 py-8 hover:bg-gray-50",onClick:()=>c("/transaction",{state:{transaction:l}})},l.id))]})]}),e.jsx(N,{})]})};export{k as default};
