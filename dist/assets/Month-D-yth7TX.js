import{j as e,a as u,b as p,u as y,r as N}from"./index-VlIQ97ZM.js";import{f as b,b as c,a as w,c as g,B as v}from"./Formtater-B-GkTaC3.js";import{c as _}from"./useFetch-FqsbQvqk.js";import{C}from"./CategoryIcon-BfIvA0o-.js";import"./apiConfig-ClF-BgST.js";const j=({bank_name:x,type:n,initial_balance:d,incomes:a,expenses:i,final_balance:l,balance:m})=>{const t=r=>r===void 0?0:typeof r=="string"?parseFloat(r):r;return e.jsx("div",{className:"w-full p-4 border-2 border-solid border-primary rounded-lg",children:e.jsxs("div",{className:"w-full flex flex-col items-start",children:[e.jsx("h1",{className:"font-medium",children:x}),e.jsx("h1",{className:"text-sm text-gray-500 font-medium",children:b(n)}),n==="debit"?e.jsxs("div",{className:"w-full flex flex-col mt-8 space-y-4",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("h1",{className:"text-sm text-gray-500",children:"Saldo inicial"}),e.jsx("h1",{className:"text-base font-semibold",children:c(t(d))})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("h1",{className:"text-sm text-gray-500",children:"Ingresos"}),e.jsx("h1",{className:"text-sm",children:c(t(a))})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("h1",{className:"text-sm text-gray-500",children:"Egresos"}),e.jsx("h1",{className:"text-sm",children:c(t(i))})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("h1",{className:"text-sm text-gray-500",children:"Saldo final"}),e.jsx("h1",{className:"text-base font-semibold",children:c(t(l))})]})]}):e.jsxs("div",{className:"w-full flex flex-col mt-8 space-y-4",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("h1",{className:"text-sm text-gray-500",children:"Gastado"}),e.jsx("h1",{className:"text-sm",children:c(t(i))})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("h1",{className:"text-sm text-gray-500",children:"Pagado"}),e.jsx("h1",{className:"text-sm",children:c(t(a))})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("h1",{className:"text-sm text-gray-500",children:"Balance"}),e.jsx("h1",{className:"text-base font-semibold",children:c(t(m))})]})]})]})})},F=()=>{var f,h;const{token:x}=u(),n=p(),d=y(),{month:a,year:i}=n.state||{month:null,year:null},{data:l,isLoading:m,error:t,refetch:r}=_(x??"",(a==null?void 0:a.toString())??"0",i??"0");return N.useEffect(()=>{i&&a&&r()},[i,a,r]),m?e.jsx("div",{children:"Loading..."}):t?e.jsx("div",{children:"Error loading data"}):e.jsxs("div",{className:"w-full min-h-screen pt-8 pb-16 px-5 md:px-72 flex flex-col justify-start items-center space-y-8",children:[e.jsx("h1",{className:"text-xl font-bold",children:"WalletSheet"}),e.jsx("h1",{className:"text-base font-medium text-center",children:`${w(a??0)} ${i}`}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row space-y-8 md:space-y-0 space-x-0 md:space-x-8 pb-20",children:[e.jsxs("div",{className:"w-full md:w-1/2 flex flex-col space-y-8",children:[e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("h1",{children:["Cuentas de débito (",l==null?void 0:l.balances.filter(s=>s.type==="debit").length,")"]}),((f=l==null?void 0:l.balances)==null?void 0:f.filter(s=>s.type==="debit").length)>0?e.jsx("ul",{className:"w-full flex flex-col space-y-4",children:l.balances.filter(s=>s.type==="debit").map((s,o)=>e.jsx(j,{bank_name:s.name,type:s.type,initial_balance:s.initial_balance,incomes:s.incomes,expenses:s.expenses,final_balance:s.final_balance,balance:s.balance},o))}):e.jsx("p",{children:"No balances found"})]}),e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("h1",{children:["Cuentas de crédito (",l==null?void 0:l.balances.filter(s=>s.type==="credit").length,")"]}),((h=l==null?void 0:l.balances)==null?void 0:h.filter(s=>s.type==="credit").length)>0?e.jsx("ul",{className:"w-full flex flex-col space-y-4",children:l.balances.filter(s=>s.type==="credit").map((s,o)=>e.jsx(j,{bank_name:s.name,type:s.type,initial_balance:s.initial_balance,incomes:s.incomes,expenses:s.expenses,final_balance:s.final_balance,balance:s.balance},o))}):e.jsx("p",{children:"No balances found"})]})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsxs("h1",{children:["Transacciones (",l==null?void 0:l.transactions.length,")"]}),l==null?void 0:l.transactions.map(s=>e.jsx("div",{className:"w-full border-b-2 border-gray-100 py-8 hover:bg-gray-50",onClick:()=>d("/transaction",{state:{transaction:s}}),children:e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsxs("div",{className:"flex flex-row space-x-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex flex-col items-center justify-center",children:e.jsx(C,{category:s.category.name})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"font-medium hover:underline cursor-pointer",children:s.concept}),e.jsx("h1",{className:"text-sm",children:g(s.transaction_date)})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[e.jsx("h1",{className:"font-medium",children:c(parseFloat(s.amount))}),e.jsx("h1",{className:"text-sm",children:s.account.bank_name})]})]})},s.id))]})]}),e.jsx(v,{})]})};export{F as default};
